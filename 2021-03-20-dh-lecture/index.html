<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>DH Lecture: –°–µ—Ç–µ–≤–æ–π –∞–Ω–∞–ª–∏–∑: –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ Gephi, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —â–µ–ø–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª—è –∂–µ–ª–∞—é—â–∏—Ö) (20 Mar 2021)</title>

    <link rel="stylesheet" href="../revealjs4/dist/reset.css" />
    <link rel="stylesheet" href="../revealjs4/dist/reveal.css" />
    <link rel="stylesheet" href="../revealjs4/dist/theme/serif.css" id="theme" />

    <!-- adjustments for serif.css -->
    <link rel="stylesheet" href="custom.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../revealjs4/plugin/highlight/monokai.css" id="highlight-theme" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown="" data-separator="^\n---\n" data-separator-vertical="^\n--\n"
          data-charset="utf-8">
<script type="text/template">

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã<br />–≤ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –Ω–∞—É–∫–∞—Ö

<br /><br /><br />üìö &nbsp; &nbsp; üéº &nbsp; &nbsp; üó∫ &nbsp; &nbsp; <font style="font-size:5rem;width:100%;">üíª</font> &nbsp; &nbsp; üèõ &nbsp; &nbsp; üé® &nbsp; &nbsp; üéÆ

<br /><br /><br /><br /><br />
(40 –ª–µ–∫—Ü, 40 —Å–µ–º)<!-- .element: style="font-size:0.65em;" -->

--

## Sixth Lecture
#### **–°–µ—Ç–µ–≤–æ–π –∞–Ω–∞–ª–∏–∑**: –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ Gephi, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —â–µ–ø–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª—è –∂–µ–ª–∞—é—â–∏—Ö)

<!-- .element width="150px;" -->
![Simple network (from Wikimedia Commons)](images/graph-symbolbild-wm-commons.png)
<!-- source: https://commons.wikimedia.org/wiki/File:Graph_betweenness.svg -->

[Frank Fischer](https://www.hse.ru/en/org/persons/182492735)
<!-- .element: style="font-size:0.8em;" -->

short link to presentation: [bit.ly/**3s40d7i**](https://bit.ly/3s40d7i)
<!-- .element: style="font-size:0.75em;" -->

<br />20 March 2021
<!-- .element: style="font-size:0.65em;" -->

--

### Motto

<br /><br />

–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ ‚Äì –º–∞—Ç—å —É—á–µ–Ω–∏—è.

--

### Today‚Äôs Agenda

<br />

1. Recap Graph-Related Measures
2. Recap Node-Related Measures
3. Recap Formalisation of Interactions
4. Some More Examples for Networks
5. Alternatives to Gephi
6. Handling Network Data in R and Python
7. Interpretation of Network Data
7. Suggestion for the Structuring of Your Presentation
8. Zachary‚Äôs Karate Club ü•ã
9. Hands-On!

--

### Hint: Danya‚Äôs Lectures (March 2017)

<br /><br />

* Lecture 1: https://www.youtube.com/watch?v=vwcMldy1v1E
* Lecture 2: https://www.youtube.com/watch?v=UpK5ioaLK8s

--

### Basic Terminology

![Graph, nodes, edges, communities](images/graph-nodes-edges-communities.png)<!-- .element width="425px;" -->

- network = graph
- nodes = vertices
- edges = links, relations
- clusters = communities

<br />

<small>(image source: [10.3390/a9010008](https://doi.org/10.3390/a9010008))</small>

---

## Recap Graph-Related Measures

<br />

- Network Size
- Maximum Degree
- Average Degree
- Density
- Average Path Length
- ‚Ä¶

--

### Example

![four nodes](images/four_nodes.png)<!-- .element height="400px;" -->

Please specify: (a) the **degree** of the node in the middle, <br />(b) the **degree** of outer nodes, (c) the **path length** between two outer nodes, <br />(d) the **network size**, (e) the **density** of this graph, <br />(f) the **average path length** of this network.
<!-- .element: style="font-size:0.8em;" -->

--

### Comparison of 5 Russian Plays

<br /><br />

| Play                                                                                | Characters | Max Degree             | Avg Degree | Density | Avg Path Length |
|-------------------------------------------------------------------------------------|------------|------------------------|------------|---------|-----------------|
| [–î–∏–º–∏—Ç—Ä–∏–π –°–∞–º–æ–∑–≤–∞–Ω–µ—Ü](https://dracor.org/rus/sumarokov-dimitrij-samozvanets) (1771) | 6          | 5 &nbsp; (–î–∏–º–∏—Ç—Ä–∏–π)    | 3.67       | 0.73    | 1.27            |
| [–ë–æ—Ä–∏—Å –ì–æ–¥—É–Ω–æ–≤](https://dracor.org/rus/pushkin-boris-godunov) (1825)                | 79         | 29 &nbsp; (–ë–æ—Ä–∏—Å)      | 8.28       | 0.11    | 3.03            |
| [–ì–æ—Ä–µ –æ—Ç —É–º–∞](https://dracor.org/rus/griboyedov-gore-ot-uma) (1825)                 | 31         | 23 &nbsp; (–ß–∞—Ü–∫–∏–π)     | 13.1       | 0.44    | 1.57            |
| [–†–µ–≤–∏–∑–æ—Ä](https://dracor.org/rus/gogol-revizor) (1836)                              | 31         | 26 &nbsp; (–ì–æ—Ä–æ–¥–Ω–∏—á–∏–π) | 14.84      | 0.49    | 1.52            |
| [–ì—Ä–æ–∑–∞](https://dracor.org/rus/ostrovsky-groza) (1859)                              | 29         | 23 &nbsp; (–ö–∞–±–∞–Ω–æ–≤–∞)   | 7.79       | 0.28    | 1.93            |

---

## Recap Node-Related Measures

--

### Degree

![Degree](images/moretti-hamlet-degree.jpg)<!-- .element height="432px;" -->

<small>In Moretti‚Äôs formalisation, Hamlet has direct relations to 16 characters (= his degree).<br />(Source: *–î–∞–ª—å–Ω–µ–µ —á—Ç–µ–Ω–∏–µ*, p. 294.)</small>

--

### Average Distance

<br />

- in Moretti‚Äôs formalisation, Hamlet has an average distance (from all other characters) of 1.45
- average distance of Claudius: 1.62
- Horatio: 1.69

--

## PageRank

<br />

- ‚ÄúPageRank works by counting the number and quality of links to a page to determine a rough estimate of how important the website is. The underlying assumption is that more important websites are likely to receive more links from other important websites.‚Äù (Wikipedia)

--

### Betweenness Centrality (1/2)

<br />

- ‚Äúa measure of centrality in a graph based on shortest paths‚Äù
- ‚ÄúFor every pair of vertices in a graph, there exists a shortest path between the vertices such that either the number of edges that the path passes through (for undirected graphs) or the sum of the weights of the edges (for directed graphs) is minimized. The betweenness centrality for each node is the number of these shortest paths that pass through the node.‚Äù (Wikipedia)

--

### Betweenness Centrality (2/2)

<br />

![betweenness](images/betweenness.png)<!-- .element height="400px;" -->

In this example, degree does not correlate with betweenness centrality.

--

Alexander Pushkin‚Äôs ‚ÄúBoris Godunov‚Äù (1825)

![betweenness](images/betweenness-pushkin-boris-godunov.png)<!-- .element width="800px;" -->

<small>Label size correlates with betweenness centrality. Gavrila Pushkin ‚Äì a side character ‚Äì in the middle.</small>

--

Aleksey Tolstoy‚Äôs ‚ÄúDeath of Ivan the Terrible‚Äù (1866)

![betweenness](images/betweenness-tolstoy-smert-ioanna-groznogo.png)<!-- .element width="800px;" -->

<small>Again, label size correlates with betweenness centrality. Bityagovsky spreading fake news.</small>

---

### Recap Formalisation of Interactions

<br />

<pre><code class="hljs" data-trim contenteditable>
Source,Target,Weight
–ë–∞—Ä—ã–Ω—è,–í–∞—Ä–≤–∞—Ä–∞,2
–ë–∞—Ä—ã–Ω—è,–ö–∞–±–∞–Ω–æ–≤,1
–ë–∞—Ä—ã–Ω—è,–ö–∞–±–∞–Ω–æ–≤–∞,1
–ë–∞—Ä—ã–Ω—è,–ö–∞—Ç–µ—Ä–∏–Ω–∞,2
–ë–æ—Ä–∏—Å,–í–∞—Ä–≤–∞—Ä–∞,4
–ë–æ—Ä–∏—Å,–ì–ª–∞—à–∞,1
–ë–æ—Ä–∏—Å,–î–∏–∫–æ–π,1
–ë–æ—Ä–∏—Å,–ñ–µ–Ω—â–∏–Ω–∞,1
–ë–æ—Ä–∏—Å,–ö–∞–±–∞–Ω–æ–≤,1
–ë–æ—Ä–∏—Å,–ö–∞–±–∞–Ω–æ–≤–∞,1
–ë–æ—Ä–∏—Å,–ö–∞—Ç–µ—Ä–∏–Ω–∞,3
–ë–æ—Ä–∏—Å,–ö—É–¥—Ä—è—à,4
–ë–æ—Ä–∏—Å,–ö—É–ª–∏–≥–∏–Ω,3
–ë–æ—Ä–∏—Å,–ü–µ—Ä–≤—ã–π,1
–ë–æ—Ä–∏—Å,–§–µ–∫–ª—É—à–∞,1
...
</code></pre>

<br />

<small>Ostrovsky‚Äôs ‚ÄúGroza‚Äù, interactions encoded in a CSV list (comma-separated values).</small>

--

### Network Graph for Ostrovsky‚Äôs ‚ÄúGroza‚Äù

![Network graph for Groza](images/rusplay-groza.png)<!-- .element height="500px;" -->

<small>Source: DS/FF. Visualisation with Python library igraph.</small>

--

### A Much More Versatile Kind of Formalisation

<pre><code class="hljs" data-trim contenteditable>
# –î–ï–ô–°–¢–í–ò–ï –ü–ï–†–í–û–ï
## –Ø–í–õ–ï–ù–ò–ï –ü–ï–†–í–û–ï
–ü–µ—Ç—Ä
–ê–Ω–∏—Å—å—è
–ê–∫—É–ª–∏–Ω–∞
–ù–∏–∫–∏—Ç–∞
## –Ø–í–õ–ï–ù–ò–ï –í–¢–û–†–û–ï
–ü–µ—Ç—Ä
–ê–Ω–∏—Å—å—è
## –Ø–í–õ–ï–ù–ò–ï –¢–†–ï–¢–¨–ï
–ü–µ—Ç—Ä
–ê–Ω–∏—Å—å—è
–ê–∫—É–ª–∏–Ω–∞
## –Ø–í–õ–ï–ù–ò–ï –ß–ï–¢–í–ï–†–¢–û–ï
–ü–µ—Ç—Ä
–ê–Ω–∏—Å—å—è
–ê–∫—É–ª–∏–Ω–∞
–ê–Ω—é—Ç–∫–∞
## –Ø–í–õ–ï–ù–ò–ï –ü–Ø–¢–û–ï
–ê–Ω–∏—Å—å—è
–ü–µ—Ç—Ä
–ê–∫—É–ª–∏–Ω–∞
...
</code></pre>

<small>Tolstoy‚Äôs ‚ÄúVlast‚Äô t‚Äômy‚Äù, a line-by-line listing of characters per scene.</small>

--

### ezlinavis

![ezlinavis screenshot](images/ezlinavis-screenshot-tolstoy.png)<!-- .element height="450px;" -->

<small>**ezlinavis** in action.</small>

---

## Some More Examples for Networks

--

### Visualising Facebook Friendships

![FB network 2010](images/fb-network-2010.jpg)

<small>(source: [Paul Butler, 2010](https://www.facebook.com/notes/facebook-engineering/visualizing-friendships/469716398919))

--

### Example of an Annotated Social Network

![Graph, nodes, edges, communities](images/jill-rettberg-annotated-social-network.png)<!-- .element width="404px;" -->

<small>Annotated communities. (source: [jill/txt](http://jilltxt.net/?p=3447))

--

### Enron E-Mail Corpus

![Enron corpus](images/enron-network-visualisation.jpg)<!-- .element width="600px;" -->

<small>(source: [cambridge-intelligence.com](https://cambridge-intelligence.com/using-social-network-analysis-measures/); data set publicly available)</small>

--

### More Networks!

<br />

- http://www.visualcomplexity.com/vc/
- website run by Manuel Lima
- 1.000 indexed network visualisation projects

---

### Alternatives to Gephi

--

### Cytoscape

![Cytoscape Screenshot (from WM Commons)](images/cytoscape_screenshot.png)

<small>Download: [**cytoscape.org**](https://cytoscape.org/). (Image source: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Cytoscape3.7.0.png).)</small>

--

### Cytoscape

<br />

- does not read GEXF format, but can read other formats
- for testing purposes, GraphML version of co-occurrence graph for [Prutkov‚Äôs](https://ru.wikipedia.org/wiki/–ö–æ–∑—å–º–∞_–ü—Ä—É—Ç–∫–æ–≤) ‚Äú–§–∞–Ω—Ç–∞–∑–∏—è‚Äù (1851): "[prutkov-fantaziya.graphml](data/prutkov-fantaziya.graphml)"

---

### Handling Network Data in R and Python

--

![Huey, Dewey, and Louie (from Wikipedia)](images/louie_dewey_huey_from_wikipedia.png)

<br />

Huey, Dewey, and Louie
<!-- .element: class="fragment" -->

<br />

<small>(Image source: [English Wikipedia](https://en.wikipedia.org/wiki/File:Louie_Dewey_and_Huey.png).)</small>

--

#### By the way ‚Ä¶

![Huey, Dewey, and Louie (from Wikipedia)](images/donald-duck-nephews.jpg)<!-- .element width="660px;" -->

<small>(Source: [reddit, 10 March 2021](https://www.reddit.com/r/ducktales/comments/m1urvy/huey_dewey_louie_in_other_languages_oc/))</small>

--

### Building and Plotting a Network in R

<br />

```R
library(igraph)
mygraph <- graph_from_literal('Huey'-'Donald', 'Dewey'-'Donald', 'Louie'-'Donald')
mygraph
plot(mygraph)
rglplot(mygraph)
rglplot(mygraph, vertex.color = 'red')
```

<br />

<small>(Needs igraph and rgl libraries installed.)</small>

--

### Building and Plotting a Network in Python

<br />

```Python
>>> import networkx
>>> my_network = networkx.Graph()
>>> my_network.add_node ('Donald')
>>> my_network.nodes
NodeView(('Donald',))
>>> my_network.edges
EdgeView([])
>>> my_network.add_edge ('Donald', 'Huey')
>>> my_network.nodes
NodeView(('Donald', 'Huey'))
>>> my_network.add_edge ('Donald', 'Dewey')
>>> my_network.add_edge ('Donald', 'Louie')
>>> my_network.nodes
NodeView(('Donald', 'Huey', 'Dewey', 'Louie'))
>>> my_network.edges
EdgeView([('Donald', 'Huey'), ('Donald', 'Dewey'), ('Donald', 'Louie')])
>>> import matplotlib.pyplot as plt
>>> networkx.draw(my_network)
>>> plt.show()

>>> networkx.degree_centrality (my_network)
>>> networkx.betweenness_centrality (my_network)
>>> networkx.eigenvector_centrality (my_network)
```

<br />

<small>(Needs networkx and matplotlib libraries installed.)</small>

---

### Interpretation of Network Data

![Translating Networks](images/translating-networks-grandjean.png)<!-- .element width="660px;" -->

<small>Three levels of interpretation: visual analysis (top left), global metrics (bottom right), use of local metrics. <br />(source: Martin Grandjean/Mathieu Jacomy: [Translating networks: linking visualization to statistics](https://reticular.hypotheses.org/1745), 18 June 2020)</small>

--

### The Visualisation Trap

![Translating Networks](images/gephi-mem.jpg)<!-- .element width="600px;" -->

<small>(source: Mathieu Jacomy: [As a technical mediation, Gephi shifts your goals (and vice-versa)](https://reticular.hypotheses.org/1866), 16 March 2021)</small>

---

### Suggestion for Structuring Your Presentations

<br />

1. short **introduction** of the research idea
2. explanation of **data sources** ‚Äì where is the data from, or how did you create it?
3. explanation of the **visualisation** ‚Äì what do we see and what does it mean? (what are the **nodes**, what are the **edges**?)
4. **interpretation** ‚Äì what did you learn from your data set?
5. brownie points: give the **source for any image** you didn‚Äôt create yourself, even for animated GIFs/memes

--

### Exemplary Presentation (1/5)

<br />

- research idea:
  1. prove that Ostrovsky‚Äôs ‚ÄúSnegurochka‚Äù has traits of a ‚Äòstation drama‚Äô (change of location corresponds to change of characters, except for the protagonists)
  2. find out how protagonists are positioned in the network

--

### Exemplary Presentation (2a/5)

![Ostrovsky‚Äôs Snegurochka on dracor.org, network view](images/snegurochka-dracor-network.png)

<small>data source: https://dracor.org/id/rus000029</small>

--

### Exemplary Presentation (2b/5)

![Ostrovsky‚Äôs Snegurochka on dracor.org, download tab](images/snegurochka-dracor-download-tab.png)

<small>download co-occurrence network data in GEXF format for use in Gephi</small>

--

### Exemplary Presentation (3/5)

![Ostrovsky‚Äôs Snegurochka, network graph, made in Gephi by Frank Fischer](images/ostrovsky-snegurochka-dracor-graph-gephi.png)<!-- .element width="800px;" -->

<small>Explanation: This is a communicaton graph extracted from the play, nodes are characters or groups, edges are shared conversations, different colours are different communities, node and label size are aligned with degree values.</small>

--

### Exemplary Presentation (4a/5):

<br />

Results:

- two strong protagonists, Snegurochka and the Tsar:<br /><br />

| Character  | Degree | Betweenness Centrality |
|------------|--------|------------------------|
| –°–Ω–µ–≥—É—Ä–æ—á–∫–∞ | 31     | 261.88                 |
| –¶–∞—Ä—å       | 26     | 186.09                 |
| –ë–æ–±—ã–ª–∏—Ö–∞   | 22     | 60.39                  |
| –ú–∏–∑–≥–∏—Ä—å    | 22     | 52.53                  |
| –õ–µ–ª—å       | 22     | 37.91                  |

--

### Exemplary Presentation (4b/5):

<br />

Results:

- 42 nodes altogether; the 40 other characters/groups perfectly group around Snegurochka and the Tsar, communities represent the different locations
- problematic: what do we do with entities like ‚Äú–í—Å–µ‚Äù in I/8? ‚Äì my solution: treat them as ‚Äònodes‚Äô

--

### Exemplary Presentation (5/5)

<br />

### Thank You!

![Snegurochka, animated GIF](images/snegurochka-animated-gif.gif)

<small>(animated GIF: [tenor.com](https://tenor.com/es/ver/noviygod-ded-moroz-snegurochka-gif-7391693))</small>

---

### Zachary‚Äôs Karate Club ü•ã

<br />

- social network of a karate club studied by Wayne W. Zachary from 1970 to 1972
- links capture interactions between the club members *outside the club*
- during the study a conflict arose between the administrator ‚ÄúJohn A‚Äù and instructor ‚ÄúMr. Hi‚Äù (pseudonyms), which led to the split of the club into two

--

### Zachary‚Äôs Karate Club ü•ã

<br />

- half of the members formed a new club around Mr. Hi
- members from the other part found a new instructor or gave up karate
- basing on collected data Zachary assigned correctly all but one member of the club to the groups they actually joined after the split
- [link to the paper from 1977](http://www1.ind.ku.dk/complexLearning/zachary1977.pdf)

--

### Zachary‚Äôs Matrix

![Zachary‚Äôs matrix](images/zachary-matrix.png)<!-- .element width="500px;" -->

--

### Let‚Äôs Try This in Gephi

<br />

- download data set: http://networkdata.ics.uci.edu/data/karate/
- GML format (Graph Modelling Language), ready for use in Gephi
- a lot of hits and one miss: ‚ÄúLike Zachary‚Äôs original network, this network accurately predicts the division for 33 of 34 of the members (number 9 was predicted to ally with John A but in actuality opted for Mr. Hi).‚Äù <!-- .element: class="fragment" --> ([http://studentwork.prattsi.org](http://studentwork.prattsi.org/infovis/2018/07/17/zacharys-karate-club/))

---

## Hands-On!

<br />

- [Gephi](https://gephi.org/)
- [ezlinavis](https://ezlinavis.dracor.org/)
- [Netzschleuder ‚Äì network catalogue, repository and centrifuge](https://networks.skewed.de/)
- [Export friends graph](https://vk.com/app3861133) (app for VK)
- ‚Ä¶

</script>
        </section>
      </div>
    </div>
    <script src="../revealjs4/dist/reveal.js"></script>
    <script src="../revealjs4/plugin/notes/notes.js"></script>
    <script src="../revealjs4/plugin/markdown/markdown.js"></script>
    <script src="../revealjs4/plugin/highlight/highlight.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
      });
    </script>
  </body>
</html>
